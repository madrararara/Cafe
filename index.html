<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¯ÙØªØ± Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ</title>
<style>
    body {
        font-family: "Cairo", sans-serif;
        background-color: #2f2f2f;
        color: white;
        text-align: center;
        padding: 20px;
    }

    input, select {
        padding: 8px;
        margin: 5px;
        border-radius: 8px;
        border: none;
        width: 120px;
    }

    button {
        background-color: #7e57c2;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 10px;
        margin: 10px;
        cursor: pointer;
        font-weight: bold;
    }

    button:hover {
        background-color: #9c6df0;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background-color: #3d3d3d;
        border-radius: 10px;
        overflow: hidden;
    }

    th, td {
        padding: 10px;
        border-bottom: 1px solid #555;
    }

    .expense {
        color: #ff5252;
    }

    .asset {
        color: #4caf50;
    }

    .summary {
        margin-top: 15px;
        font-size: 18px;
        font-weight: bold;
    }

    .total-final {
        margin-top: 10px;
        background-color: #444;
        padding: 10px;
        border-radius: 10px;
        font-size: 18px;
    }

    .select-box {
        transform: scale(1.2);
    }
</style>
</head>
<body>

<h2>ğŸ“’ Ø¯ÙØªØ± Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h2>

<input type="text" id="desc" placeholder="Ø§Ù„Ø¨ÙŠØ§Ù†">
<select id="type">
    <option value="Ø£ØµÙ„">Ø£ØµÙ„</option>
    <option value="Ù…ØµØ±ÙˆÙ">Ù…ØµØ±ÙˆÙ</option>
</select>
<input type="number" id="amount" placeholder="Ø§Ù„Ù‚ÙŠÙ…Ø©">
<br>
<button onclick="addEntry()">Ø¥Ø¶Ø§ÙØ©</button>

<table id="records">
    <tr>
        <th>Ø§Ù„Ø±Ù‚Ù…</th>
        <th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>
        <th>Ø§Ù„Ù†ÙˆØ¹</th>
        <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
    </tr>
</table>

<div class="summary">
    Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ØµÙˆÙ„: <span id="totalAssets">0</span> |
    Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ: <span id="totalExpenses">0</span>
</div>

<div class="total-final">
    ğŸ’° Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ (Ø§Ù„Ø£ØµÙˆÙ„ - Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ): <span id="finalTotal">0</span>
</div>

<button onclick="clearAll()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
<button onclick="enableSelection()">ğŸ—‘ï¸ Ø§Ø®ØªØ± Ù„Ù„Ø­Ø°Ù</button>
<button onclick="printPage()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙŠÙˆÙ…</button>

<script>
    let entries = JSON.parse(localStorage.getItem("entries")) || [];
    let selectionMode = false;

    function saveData() {
        localStorage.setItem("entries", JSON.stringify(entries));
    }

    function renderTable() {
        const table = document.getElementById("records");
        table.innerHTML = `
            <tr>
                <th>Ø§Ù„Ø±Ù‚Ù…</th>
                <th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>
                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
                ${selectionMode ? "<th>Ø§Ø®ØªÙŠØ§Ø±</th>" : ""}
            </tr>
        `;

        let totalAssets = 0;
        let totalExpenses = 0;

        entries.forEach((entry, index) => {
            const row = document.createElement("tr");
            const typeClass = entry.type === "Ù…ØµØ±ÙˆÙ" ? "expense" : "asset";
            row.innerHTML = `
                <td>${index}</td>
                <td>${entry.desc}</td>
                <td class="${typeClass}">${entry.type}</td>
                <td>${entry.amount}</td>
                ${selectionMode ? `<td><input type='checkbox' class='select-box' data-index='${index}'></td>` : ""}
            `;
            table.appendChild(row);

            if (entry.type === "Ù…ØµØ±ÙˆÙ") {
                totalExpenses += entry.amount;
            } else {
                totalAssets += entry.amount;
            }
        });

        document.getElementById("totalAssets").textContent = totalAssets;
        document.getElementById("totalExpenses").textContent = totalExpenses;
        document.getElementById("finalTotal").textContent = totalAssets - totalExpenses;
    }

    function addEntry() {
        const desc = document.getElementById("desc").value;
        const type = document.getElementById("type").value;
        const amount = parseFloat(document.getElementById("amount").value);

        if (!desc || isNaN(amount)) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù† ÙˆØ§Ù„Ù‚ÙŠÙ…Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!");
            return;
        }

        entries.push({ desc, type, amount });
        saveData();
        renderTable();

        document.getElementById("desc").value = "";
        document.getElementById("amount").value = "";
    }

    function clearAll() {
        if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")) {
            entries = [];
            saveData();
            renderTable();
        }
    }

    function enableSelection() {
        if (!selectionMode) {
            selectionMode = true;
            renderTable();

            const btn = document.querySelector('button[onclick="enableSelection()"]');
            btn.textContent = "ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø¯Ø¯";
            btn.onclick = deleteSelected;
        } else {
            selectionMode = false;
            renderTable();

            const btn = document.querySelector('button[onclick="deleteSelected()"]');
            btn.textContent = "ğŸ—‘ï¸ Ø§Ø®ØªØ± Ù„Ù„Ø­Ø°Ù";
            btn.onclick = enableSelection;
        }
    }

    function deleteSelected() {
        const checkboxes = document.querySelectorAll('.select-box:checked');
        if (checkboxes.length === 0) {
            alert("Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ ØµÙ Ù„Ù„Ø­Ø°Ù!");
            return;
        }

        if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©ØŸ")) {
            const indexesToDelete = Array.from(checkboxes).map(cb => parseInt(cb.dataset.index));
            entries = entries.filter((_, index) => !indexesToDelete.includes(index));
            saveData();
            enableSelection(); // ÙŠØ¹ÙˆØ¯ Ø§Ù„Ø²Ø± Ù„ÙˆØ¶Ø¹Ù‡ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ
        }
    }

    function printPage() {
        window.print();
    }

    renderTable();
</script>

</body>
</html>
